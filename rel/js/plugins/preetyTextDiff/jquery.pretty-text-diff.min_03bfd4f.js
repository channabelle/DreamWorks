(function(){var t;t=jQuery,t.fn.extend({prettyTextDiff:function(e){var n,i;return i={originalContainer:".original",changedContainer:".changed",diffContainer:".diff",cleanup:!0,debug:!1},i=t.extend(i,e),t.fn.prettyTextDiff.debug("Options: ",i,i),n=new diff_match_patch,this.each(function(){var e,f,r,a;return i.originalContent&&i.changedContent?(a=t("<div />").html(i.originalContent).text(),e=t("<div />").html(i.changedContent).text()):(a=t(i.originalContainer,this).text(),e=t(i.changedContainer,this).text()),t.fn.prettyTextDiff.debug("Original text found: ",a,i),t.fn.prettyTextDiff.debug("Changed  text found: ",e,i),r=n.diff_main(a,e),i.cleanup&&n.diff_cleanupSemantic(r),t.fn.prettyTextDiff.debug("Diffs: ",r,i),f=t.map(r,function(e){return t.fn.prettyTextDiff.createHTML(e)}),t(i.diffContainer,this).html(f.join("")),this})}}),t.fn.prettyTextDiff.debug=function(t,e,n){return n.debug?console.log(t,e):void 0},t.fn.prettyTextDiff.createHTML=function(t){var e,n,i,f,r,a,c,o;switch(n=[],f=/&/g,a=/</g,r=/>/g,c=/\n/g,i=t[0],e=t[1],o=e.replace(f,"&amp;").replace(a,"&lt;").replace(r,"&gt;").replace(c,"<br>"),i){case DIFF_INSERT:return"<ins>"+o+"</ins>";case DIFF_DELETE:return"<del>"+o+"</del>";case DIFF_EQUAL:return"<span>"+o+"</span>"}}}).call(this);